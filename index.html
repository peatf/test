<!DOCTYPE html>
<html>
<head>
    <title>Optimized Glass Wheel</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
        #loading { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); }
    </style>
</head>
<body>
    <div id="loading">Loading...</div>
    <script src="https://unpkg.com/three@0.137.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.137.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        async function init() {
            // 1. Use simpler geometry and materials
            // 2. Preload critical assets first
            // 3. Use cached environment map
            // 4. Optimize text rendering

            const [envMap, font] = await Promise.all([
                new THREE.CubeTextureLoader()
                    .setPath('https://cdn.jsdelivr.net/gh/mrdoob/three.js/r128/examples/textures/cube/pisa/')
                    .load(['px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png']),
                new THREE.FontLoader().loadAsync('https://cdn.jsdelivr.net/gh/mrdoob/three.js/r128/examples/fonts/helvetiker_regular.typeface.json')
            ]);

            // Scene setup
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xe6e6e6);
            
            // Camera with adjusted FOV
            const camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 100);
            camera.position.set(0, 0, 5);

            // Renderer with performance settings
            const renderer = new THREE.WebGLRenderer({
                antialias: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);

            // Simplified material with fake transmission
            const glassMaterial = new THREE.MeshStandardMaterial({
                color: 0xffffff,
                metalness: 0.3,
                roughness: 0.15,
                transparent: true,
                opacity: 0.9,
                envMap: envMap,
                envMapIntensity: 1.5
            });

            // Optimized torus geometry
            const wheel = new THREE.Mesh(
                new THREE.TorusGeometry(2, 0.5, 32, 64),
                glassMaterial
            );
            wheel.rotation.x = Math.PI/2;
            scene.add(wheel);

            // Text creation with caching
            const createText = (text, size, yPos) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1024; canvas.height = 256;
                ctx.fillStyle = '#888888';
                ctx.font = `${size}px Arial`;
                ctx.textAlign = 'center';
                text.split('\n').forEach((line, i) => 
                    ctx.fillText(line, 512, 128 + i * size * 1.2)
                );
                
                const texture = new THREE.CanvasTexture(canvas);
                const material = new THREE.SpriteMaterial({ map: texture });
                const sprite = new THREE.Sprite(material);
                sprite.scale.set(3, 1, 1);
                sprite.position.y = yPos;
                return sprite;
            };

            scene.add(createText('REALIZATION\nTOOLKIT', 40, 2));
            scene.add(createText('ENROLL NOW', 30, 0).position.set(-2, 0, 0));
            scene.add(createText('EXPLORE\nTHE TOOLKIT', 30, 0).position.set(2, 0, 0));
            scene.add(createText('FIND YOUR\nTOOLS', 30, -2));

            // Lighting
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light, new THREE.AmbientLight(0xffffff, 0.5));

            // Controls
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;

            // Hide loading screen
            document.getElementById('loading').remove();

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                wheel.rotation.z += 0.005;
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
        }

        init().catch(console.error);
    </script>
</body>
</html>
