<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimized Frosted Glass Wheel</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #e6e6e6; /* Light gray background */
            font-family: Arial, sans-serif; /* Default font */
        }

        #scene-container {
            position: relative; /* Container for absolute positioning */
            width: 100vw;
            height: 100vh;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Canvas behind UI */
        }

        .ui-element {
            position: absolute;
            z-index: 2; /* UI elements on top */
            color: #555; /* Dark gray text */
            text-align: center;
            transform: translate(-50%, -50%); /* Centering helper */
            pointer-events: none; /* Allow clicking through text to controls */
        }

        #title-realization {
            top: 30%; /* Adjust percentage for positioning */
            left: 50%;
            font-size: 2.5vmin; /* Responsive font size */
            font-weight: bold;
            letter-spacing: 0.1em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        #title-toolkit {
            top: 35%; /* Adjust percentage for positioning */
            left: 50%;
            font-size: 2.5vmin; /* Responsive font size */
            font-weight: bold;
            letter-spacing: 0.1em;
             text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);

        }

        .button {
            /* Basic button styling */
            background-color: rgba(255, 255, 255, 0.6); /* Semi-transparent white */
            /* backdrop-filter: blur(4px); */ /* Optional: Frosted glass effect behind text - can impact performance */
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 15px; /* Rounded corners */
            padding: 1.5vmin 2.5vmin; /* Responsive padding */
            font-size: 1.8vmin; /* Responsive font size */
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15); /* Soft shadow */
            line-height: 1.3;
            pointer-events: auto; /* Buttons should be interactive */
            cursor: pointer;
             transition: transform 0.2s ease, background-color 0.2s ease;
             min-width: 120px; /* Ensure buttons have some minimum size */
        }
        .button:hover {
             background-color: rgba(255, 255, 255, 0.8);
             transform: translate(-50%, -50%) scale(1.05); /* Slight scale on hover */
        }


        #button-enroll {
            top: 50%;
            left: 25%; /* Position left */
        }

        #button-explore {
            top: 50%;
            left: 75%; /* Position right */
        }

        #button-find {
            top: 75%; /* Position bottom */
            left: 50%;
        }

         /* Simple loading indicator */
         #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            color: #333;
            z-index: 3; /* Above everything */
            background: rgba(230, 230, 230, 0.8);
            padding: 10px 20px;
            border-radius: 5px;
        }

    </style>
</head>
<body>
    <div id="scene-container">
        <canvas></canvas>

        <!-- UI Elements -->
        <div id="loading">Loading 3D Assets...</div>

        <div id="title-realization" class="ui-element">REALIZATION</div>
        <div id="title-toolkit" class="ui-element">TOOLKIT</div>

        <div id="button-enroll" class="ui-element button">ENROLL<br>NOW</div>
        <div id="button-explore" class="ui-element button">EXPLORE<br>the<br>TOOLKIT</div>
        <div id="button-find" class="ui-element button">FIND your<br>TOOLS</div>
        <!-- End UI Elements -->

    </div>

    <!-- Use ES Module imports for cleaner code and potentially better loading -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.137.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.137.0/examples/jsm/"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        // Removed FontLoader, TextGeometry, dat.GUI imports

        // --- Scene Setup (Mostly unchanged) ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xe6e6e6);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 7); // Adjusted camera distance slightly

        const renderer = new THREE.WebGLRenderer({
            canvas: document.querySelector('canvas'), // Target the specific canvas
            antialias: true,
            alpha: true // Allow transparency if needed behind canvas (though body bg sets color)
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        // No need to appendChild, canvas is already in HTML

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 3;
        controls.maxDistance = 15;
        controls.target.set(0, 0, 0); // Ensure controls focus on the center


        // --- Lighting (Unchanged) ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Slightly increased ambient
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8); // Slightly decreased directional
        directionalLight.position.set(5, 5, 5);
        directionalLight.castShadow = true;
        // Optional: Optimize shadow map size
        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 1024;
        scene.add(directionalLight);

        const spotLight = new THREE.SpotLight(0xffffff, 0.7); // Slightly decreased spotlight
        spotLight.position.set(-5, 5, 5);
        spotLight.angle = Math.PI / 6;
        spotLight.penumbra = 0.2;
        spotLight.castShadow = true;
         // Optional: Optimize shadow map size
        spotLight.shadow.mapSize.width = 1024;
        spotLight.shadow.mapSize.height = 1024;
        scene.add(spotLight);


        // --- Material (Unchanged, still needs to look good) ---
        const frostedMaterial = new THREE.MeshPhysicalMaterial({
            color: 0xffffff,
            metalness: 0.1,
            roughness: 0.1, // Adjust for desired frostiness (lower = clearer, higher = rougher)
            transmission: 0.95,
            transparent: true,
            clearcoat: 1.0,
            clearcoatRoughness: 0.1,
            ior: 1.5,
            side: THREE.DoubleSide,
            envMapIntensity: 1.0 // Control reflection intensity
        });

        // --- Environment Map (Load using CubeTextureLoader for now) ---
        const envMapLoader = new THREE.CubeTextureLoader();
        envMapLoader.load([
            'https://threejs.org/examples/textures/cube/Park2/posx.jpg',
            'https://threejs.org/examples/textures/cube/Park2/negx.jpg',
            'https://threejs.org/examples/textures/cube/Park2/posy.jpg',
            'https://threejs.org/examples/textures/cube/Park2/negy.jpg',
            'https://threejs.org/examples/textures/cube/Park2/posz.jpg',
            'https://threejs.org/examples/textures/cube/Park2/negz.jpg'
        ], (envMap) => {
            scene.environment = envMap;
            frostedMaterial.envMap = envMap; // Apply env map to material
            frostedMaterial.needsUpdate = true;
            hideLoading(); // Hide loading when env map is ready
        }, undefined, (error) => {
            console.error("Error loading environment map:", error);
            hideLoading(); // Hide loading even if env map fails
        });


        // --- Wheel Geometry (Slightly reduced complexity) ---
        const wheelParams = {
            radius: 2,
            tube: 0.6,
            radialSegments: 48, // Reduced from 64
            tubularSegments: 48, // Reduced from 64
            arc: Math.PI * 2
        };
        const torusGeometry = new THREE.TorusGeometry(
            wheelParams.radius, wheelParams.tube, wheelParams.radialSegments, wheelParams.tubularSegments, wheelParams.arc
        );

        const wheel = new THREE.Mesh(torusGeometry, frostedMaterial);
        wheel.castShadow = true;
        wheel.receiveShadow = true;
        wheel.rotation.x = Math.PI / 2; // Keep rotation
        scene.add(wheel);

        // --- Remove All Text Geometry Code ---
        // createTextMesh, createButtonMesh, and FontLoader calls are gone.


        // --- Loading Indicator ---
        const loadingElement = document.getElementById('loading');
        function hideLoading() {
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
        }
        // Initially, we don't hide it. It gets hidden when the env map loads (or fails).


        // --- Resize Handler (Adjusted for container) ---
        window.addEventListener('resize', () => {
            const container = document.getElementById('scene-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });

        // --- Animation Loop (Unchanged) ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update(); // Update controls
            // Subtle rotation animation
            wheel.rotation.z += 0.001;
            renderer.render(scene, camera);
        }

        // Start animation loop
        animate();

        // Add simple click listeners to buttons (optional example)
        document.getElementById('button-enroll').addEventListener('click', () => alert('Enroll Now clicked!'));
        document.getElementById('button-explore').addEventListener('click', () => alert('Explore Toolkit clicked!'));
        document.getElementById('button-find').addEventListener('click', () => alert('Find Tools clicked!'));


    </script>
</body>
</html>
